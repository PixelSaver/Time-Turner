[gd_scene load_steps=24 format=3 uid="uid://bcpq7dlbvxm7q"]

[ext_resource type="Script" uid="uid://go3ktus0ojnc" path="res://Scripts/timeturner.gd" id="1_seunl"]
[ext_resource type="Script" uid="uid://7hv066xd5o75" path="res://Scripts/time_turner_manager.gd" id="2_1074w"]
[ext_resource type="Material" uid="uid://dbasvcmttx2fk" path="res://Assets/gold_timeturner.tres" id="2_jt7fs"]
[ext_resource type="Shader" uid="uid://dhwx1e6crd7ym" path="res://Shaders/stars.gdshader" id="4_1074w"]
[ext_resource type="Theme" uid="uid://bu0t5yp4ma0l7" path="res://Assets/UI_theme.tres" id="4_k1arh"]
[ext_resource type="Script" uid="uid://b5gyx4odimqnq" path="res://Scripts/bg.gd" id="5_crxf4"]
[ext_resource type="Theme" uid="uid://dy0srow56ym10" path="res://Assets/circular_button.tres" id="5_egm6d"]
[ext_resource type="Script" uid="uid://c2bgm80cvqamb" path="res://Scripts/circle_button.gd" id="6_pii81"]
[ext_resource type="Script" uid="uid://dab74pruhdrni" path="res://Scripts/time_manager.gd" id="7_8t3bq"]
[ext_resource type="PackedScene" uid="uid://mbo83nfqw3sn" path="res://Scenes/upgrade_button.tscn" id="7_maq1p"]
[ext_resource type="Script" uid="uid://c42l28qsvy4c8" path="res://Scripts/upgrade_manager.gd" id="7_rwwjb"]
[ext_resource type="Resource" uid="uid://bvigestjvbbx4" path="res://Assets/Upgrades/center_mult.tres" id="8_ebuvx"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_t4i0o"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_seunl"]
sky_material = SubResource("ProceduralSkyMaterial_t4i0o")

[sub_resource type="Environment" id="Environment_6v6tp"]
background_mode = 2
sky = SubResource("Sky_seunl")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CylinderShape3D" id="CylinderShape3D_6v6tp"]
height = 0.2
radius = 2.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_t4i0o"]
height = 0.2
radius = 1.7

[sub_resource type="CylinderShape3D" id="CylinderShape3D_seunl"]
height = 0.2
radius = 1.0

[sub_resource type="SphereShape3D" id="SphereShape3D_t4i0o"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_crxf4"]
render_priority = 0
shader = ExtResource("4_1074w")
shader_parameter/mouse_pos = Vector2(0.325, 0.395)
shader_parameter/uv_scale = Vector2(19.5, 10)

[sub_resource type="QuadMesh" id="QuadMesh_k1arh"]
size = Vector2(19.5, 10.9)

[sub_resource type="Gradient" id="Gradient_k1arh"]
offsets = PackedFloat32Array(1)
colors = PackedColorArray(1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_egm6d"]
gradient = SubResource("Gradient_k1arh")
width = 1

[node name="Timeturner" type="Node3D" node_paths=PackedStringArray("inner_ring", "center") groups=["TimeTurner"]]
script = ExtResource("1_seunl")
inner_ring = NodePath("TimeTurnerManager/Ring1")
center = NodePath("TimeTurnerManager/Center")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 4.11803, -1.80005e-07)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_6v6tp")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="TimeTurnerManager" type="Node3D" parent="." node_paths=PackedStringArray("center_arr", "inner_ring_arr", "outer_ring_arr")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, 0)
script = ExtResource("2_1074w")
center_arr = [NodePath("Center/Disc")]
inner_ring_arr = [NodePath("Ring1/CSGTorus3D")]
outer_ring_arr = [NodePath("Ring2/CSGTorus3D")]

[node name="Ring2" type="RigidBody3D" parent="TimeTurnerManager"]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
gravity_scale = 0.0

[node name="CSGTorus3D" type="CSGTorus3D" parent="TimeTurnerManager/Ring2"]
transform = Transform3D(0.997808, 0, 0, 0, 0.997808, 0, 0, 0, 0.997808, 0, 0, 0)
material_override = ExtResource("2_jt7fs")
inner_radius = 1.8
outer_radius = 2.0
sides = 64
ring_sides = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="TimeTurnerManager/Ring2"]
shape = SubResource("CylinderShape3D_6v6tp")

[node name="Ring1" type="RigidBody3D" parent="TimeTurnerManager"]
rotation_edit_mode = 1
axis_lock_angular_y = true
gravity_scale = 0.0
center_of_mass_mode = 1
angular_damp_mode = 1

[node name="CSGTorus3D" type="CSGTorus3D" parent="TimeTurnerManager/Ring1"]
transform = Transform3D(0.997808, 0, 0, 0, 0.997808, 0, 0, 0, 0.997808, 0, 0, 0)
material_override = ExtResource("2_jt7fs")
inner_radius = 1.5
outer_radius = 1.7
sides = 64
ring_sides = 8

[node name="Pin" type="CSGCylinder3D" parent="TimeTurnerManager/Ring1/CSGTorus3D"]
transform = Transform3D(1.00001, 0, 0, 0, -4.37115e-08, 1.00001, 0, -1.00001, -4.37115e-08, 0, 0, 0)
material_override = ExtResource("2_jt7fs")
radius = 0.05
height = 3.75

[node name="CSGCylinder3D4" type="CSGCylinder3D" parent="TimeTurnerManager/Ring1/CSGTorus3D/Pin"]
transform = Transform3D(0.999999, 0.0012, -0.000971142, -0.00119941, 0.999999, 0.000605606, 0.000971866, -0.000604444, 1, 0, 0, 0)
material_override = ExtResource("2_jt7fs")
operation = 2
radius = 0.1
height = 3.1

[node name="CollisionShape3D" type="CollisionShape3D" parent="TimeTurnerManager/Ring1"]
shape = SubResource("CylinderShape3D_t4i0o")
disabled = true

[node name="Center" type="RigidBody3D" parent="TimeTurnerManager"]
rotation_edit_mode = 1
gravity_scale = 0.0

[node name="Disc" type="CSGCylinder3D" parent="TimeTurnerManager/Center"]
material_override = ExtResource("2_jt7fs")
radius = 1.3
height = 0.2
sides = 32
material = ExtResource("2_jt7fs")

[node name="CSGTorus3D" type="CSGTorus3D" parent="TimeTurnerManager/Center/Disc"]
material_override = ExtResource("2_jt7fs")
inner_radius = 1.2
outer_radius = 1.4
sides = 32
ring_sides = 16

[node name="Pin" type="CSGCylinder3D" parent="TimeTurnerManager/Center/Disc"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0)
material_override = ExtResource("2_jt7fs")
radius = 0.05
height = 3.1

[node name="CollisionShape3D" type="CollisionShape3D" parent="TimeTurnerManager/Center"]
shape = SubResource("CylinderShape3D_seunl")
disabled = true

[node name="Base" type="StaticBody3D" parent="."]
visible = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="Base"]
shape = SubResource("SphereShape3D_t4i0o")

[node name="BG" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, -2.9611, 1.29434e-07)
material_override = SubResource("ShaderMaterial_crxf4")
mesh = SubResource("QuadMesh_k1arh")
script = ExtResource("5_crxf4")

[node name="UI" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
focus_mode = 2
mouse_filter = 2
theme = ExtResource("4_k1arh")

[node name="UpgradeManager" type="Panel" parent="UI/Control" node_paths=PackedStringArray("parent")]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 0.95
offset_left = 1259.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("7_rwwjb")
parent = NodePath("VBoxContainer")

[node name="VBoxContainer" type="VBoxContainer" parent="UI/Control/UpgradeManager"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="UpgradeButton" parent="UI/Control/UpgradeManager/VBoxContainer" instance=ExtResource("7_maq1p")]
layout_mode = 2
flat = false
stored_upgrade = ExtResource("8_ebuvx")

[node name="TextureProgressBar" type="TextureProgressBar" parent="UI/Control"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.95
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
value = 20.0
nine_patch_stretch = true
texture_under = SubResource("GradientTexture1D_egm6d")
texture_progress = SubResource("GradientTexture1D_egm6d")
tint_under = Color(1, 1, 1, 0.121569)
tint_progress = Color(0.670094, 0.596164, 0, 1)

[node name="Panel2" type="Panel" parent="UI/Control"]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.25
anchor_bottom = 0.95
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="TimeManager" type="Control" parent="UI/Control" node_paths=PackedStringArray("label", "minus_label")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("7_8t3bq")
label = NodePath("TimeCounter/Panel/RichTextLabel")
minus_label = NodePath("Minus")

[node name="Minus" type="RichTextLabel" parent="UI/Control/TimeManager"]
visible = false
custom_minimum_size = Vector2(20, 20)
layout_mode = 0
offset_left = 535.0
offset_top = 52.0
offset_right = 634.0
offset_bottom = 107.0
mouse_filter = 2
bbcode_enabled = true
text = "[color=red]- 10 s"
fit_content = true
autowrap_mode = 0
vertical_alignment = 1

[node name="TimeCounter" type="MarginContainer" parent="UI/Control/TimeManager"]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.45
anchor_bottom = 0.12
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="Panel" type="Panel" parent="UI/Control/TimeManager/TimeCounter"]
layout_mode = 2

[node name="RichTextLabel" type="RichTextLabel" parent="UI/Control/TimeManager/TimeCounter/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_right = -10.0
grow_horizontal = 2
grow_vertical = 2
text = "Time: TIME FOR YOU TO GET A WATCH"
fit_content = true
vertical_alignment = 1

[node name="Button" type="Button" parent="UI/Control"]
custom_minimum_size = Vector2(650, 650)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -300.0
offset_top = -300.0
offset_right = 300.0
offset_bottom = 300.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("5_egm6d")
disabled = true
flat = true
script = ExtResource("6_pii81")
